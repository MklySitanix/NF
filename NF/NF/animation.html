<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Новые фильмы — Анимация</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="page-overlay">

        <!-- HEADER -->
        <header>
            <div class="hamburger" id="hamburger" aria-label="Меню" role="button" tabindex="0">
                <div class="bar"></div>
            </div>

            <div class="logo-placeholder" aria-hidden="true">
                <img src="img/logo.png" alt="Логотип">
            </div>

            <nav class="nav-cats" aria-label="Главная навигация">
                <a href="index.html">Главная</a>
                <a href="movies.html">Фильмы</a>
                <a href="serials.html">Сериалы</a>
                <a href="animation.html" class="active">Анимация</a>
                <a href="tv.html">ТВ</a>
            </nav>

            <div class="header-actions">
                <div class="search" role="search">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2"></circle></svg>
                    <input type="text" placeholder="Поиск" aria-label="Поиск">
                </div>
                <button class="btn-login">Войти</button>
            </div>
        </header>

        <!-- SIDEBAR MENU -->
        <div class="sidebar" id="sidebar" aria-hidden="true">
            <h3>Меню</h3>
            <a href="index.html">Главная</a>
            <a href="movies.html">Фильмы</a>
            <a href="serials.html">Сериалы</a>
            <a href="animation.html">Анимация</a>
            <a href="tv.html">ТВ</a>
            <hr style="border-color:rgba(255,255,255,0.03)">
            <a href="#">Подписка</a>
            <a href="#">Мой список</a>
            <a href="#">Помощь</a>
        </div>
        <div class="overlay-click" id="overlay"></div>

        <!-- MAIN -->
        <main>
            <div class="page-title">Анимация</div>

            <!-- SORT BAR — вставь вместо старого -->
            <div class="sort-bar" role="toolbar" aria-label="Сортировка мультфильмов">
                <label for="sort">Сортировать по:</label>

                <div class="sort-select-wrapper">
                    <select id="sort" class="sort-select" aria-label="Критерий сортировки">
                        <option value="year">Году</option>
                        <option value="title">Названию</option>
                        <option value="popularity">Популярности</option>
                    </select>
                    <!-- SVG-стрелочка для селекта (стилизует выпадашку) -->
                    <svg class="select-chev" viewBox="0 0 24 24" width="18" height="18" aria-hidden>
                        <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                    </svg>
                </div>

                <button id="sort-dir" class="sort-dir" title="Переключить направление сортировки" aria-pressed="false" aria-label="Переключить направление сортировки">
                    <!-- chevron up -->
                    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden>
                        <path d="M6 15l6-6 6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
                    </svg>
                </button>
            </div>


            <!-- MOVIES LIST -->
            <div class="movies-list" id="movies-list">
                <!-- Холодное сердце -->
                <a class="movie-card"
                   href="animation/holodnoe-sertse.html"
                   aria-label="Страница мультфильма «Холодное сердце»">
                    <img class="poster" loading="lazy" src="img/poster-frozen.jpg" alt="Холодное сердце — обложка" width="320" height="180">
                    <div class="movie-info">
                        <h2>Холодное сердце</h2>
                        <div class="movie-meta">2013 · Популярность: 96</div>
                        <p>Трогательная история о сестринской любви и магии, способной растопить лёд.</p>
                    </div>
                </a>

                <!-- Шрек -->
                <a class="movie-card"
                   href="animation/shrek.html"
                   aria-label="Страница мультфильма «Шрек»">
                    <img class="poster" loading="lazy" src="img/poster-shrek.jpg" alt="Шрек — обложка" width="320" height="180">
                    <div class="movie-info">
                        <h2>Шрек</h2>
                        <div class="movie-meta">2001 · Популярность: 94</div>
                        <p>Весёлое и трогательное приключение огра Шрека и его друзей в волшебном королевстве.</p>
                    </div>
                </a>

                <!-- Зверополис -->
                <a class="movie-card"
                   href="animation/zveropolis.html"
                   aria-label="Страница мультфильма «Зверополис»">
                    <img class="poster" loading="lazy" src="img/poster-zootopia.jpg" alt="Зверополис — обложка" width="320" height="180">
                    <div class="movie-info">
                        <h2>Зверополис</h2>
                        <div class="movie-meta">2016 · Популярность: 95</div>
                        <p>История о дружбе и доверии между крольчихой-полицейским и хитрым лисом в большом городе животных.</p>
                    </div>
                </a>



                <!-- Добавляй карточки по образцу, указывая data-year, data-title, data-popularity -->
            </div>
        </main>

        <!-- FOOTER -->
        <footer>
            <div class="footer-inner">
                <div class="footer-col">
                    <a href="index.html" class="big-logo-link" title="Новые фильмы — на главную">
                        <img src="img/logo1.png" alt="Новые фильмы" width="160" height="60">
                    </a>
                    <div class="socials">
                        <a href="https://vk.com/sitanix"
                           target="_blank" rel="noopener noreferrer"
                           title="Мы в ВКонтакте — sitanix"
                           aria-label="ВКонтакте — sitanix">
                            <img src="img/vk.png" alt="ВКонтакте" width="40" height="40">
                        </a>

                        <a href="https://t.me/sitanix"
                           target="_blank" rel="noopener noreferrer"
                           title="Telegram — @sitanix"
                           aria-label="Telegram — sitanix">
                            <img src="img/tg.png" alt="Telegram" width="40" height="40">
                        </a>
                    </div>

                </div>

                <div class="footer-col">
                    <h4>О нас</h4>
                    <a href="#">О компании</a>
                    <a href="#">Информация для партнёров</a>
                    <a href="#">Политика конфиденциальности</a>
                    <a href="#">Пользовательское соглашение</a>
                    <a href="#">Реклама</a>
                    <a href="#">Оставить отзыв</a>
                </div>

                <div class="footer-col">
                    <h4>Раздел</h4>
                    <a href="index.html">Домашняя страница</a>
                    <a href="movies.html">Фильмы</a>
                    <a href="serials.html">Сериалы</a>
                    <a href="animation.html">Анимация</a>
                    <a href="tv.html">Телевидение</a>
                </div>

                <div class="footer-col">
                    <h4>Служба поддержки</h4>
                    <p style="color:var(--muted);margin-top:0;">Мы всегда готовы помочь. Наши операторы онлайн 0/7</p>
                    <a href="mailto:NovieFilmi@yavi.ru">NovieFilmi@yavi.ru</a>
                    <a href="tel:+73950807">(395)-08-07</a>
                </div>
            </div>

            <div class="copy">ООО "Новые фильмы"</div>
        </footer>
    </div> <!-- .page-overlay -->

    <script>
        /* SIDEBAR TOGGLE (как на главной) */
        const hamburger = document.getElementById('hamburger');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        function openMenu() { sidebar.classList.add('open'); overlay.classList.add('show'); sidebar.setAttribute('aria-hidden', 'false') }
        function closeMenu() { sidebar.classList.remove('open'); overlay.classList.remove('show'); sidebar.setAttribute('aria-hidden', 'true') }
        hamburger.addEventListener('click', () => { if (sidebar.classList.contains('open')) closeMenu(); else openMenu(); });
        overlay.addEventListener('click', closeMenu);

        /* SORT + FLIP ANIMATION (smooth reorder) */
        const sortSelect = document.getElementById('sort');
        const sortDirBtn = document.getElementById('sort-dir');
        const moviesList = document.getElementById('movies-list');

        let direction = 'asc'; // 'asc' or 'desc'
        function updateSortUI() {
            if (direction === 'desc') sortDirBtn.classList.add('desc'); else sortDirBtn.classList.remove('desc');
            sortDirBtn.setAttribute('aria-pressed', direction === 'desc');
        }
        updateSortUI();

        // Helper: get numeric or string value
        function valueFor(card, criterion) {
            if (criterion === 'year') return parseInt(card.dataset.year || 0, 10);
            if (criterion === 'popularity') return parseInt(card.dataset.popularity || 0, 10);
            return (card.dataset.title || '').toString().toLowerCase();
        }

        // FLIP animation: animate reordering smoothly
        function animateReorder(container, newOrder) {
            // newOrder: array of DOM elements in desired order
            const firstRects = new Map();
            const children = Array.from(container.children);
            children.forEach(el => firstRects.set(el, el.getBoundingClientRect()));

            // apply new order in DOM (but visually it will jump — we'll invert)
            newOrder.forEach(el => container.appendChild(el));

            // compute last rects and invert
            const lastRects = new Map();
            newOrder.forEach(el => lastRects.set(el, el.getBoundingClientRect()));

            // apply transforms to invert
            newOrder.forEach(el => {
                const first = firstRects.get(el);
                const last = lastRects.get(el);
                const dx = first.left - last.left;
                const dy = first.top - last.top;
                if (dx || dy) {
                    el.style.transition = 'none';
                    el.style.transform = `translate(${dx}px, ${dy}px)`;
                    // force reflow
                    el.getBoundingClientRect();
                    // animate to zero
                    el.style.transition = `transform ${getComputedStyle(document.documentElement).getPropertyValue('--transition-medium') || '450ms'} cubic-bezier(.2,.8,.2,1)`;
                    el.style.transform = '';
                    // cleanup after transition
                    const clear = () => {
                        el.style.transition = '';
                        el.style.transform = '';
                        el.removeEventListener('transitionend', clear);
                    };
                    el.addEventListener('transitionend', clear);
                }
            });
        }

        function sortMovies() {
            const criterion = sortSelect.value; // 'year' | 'title' | 'popularity'
            const cards = Array.from(moviesList.querySelectorAll('.movie-card'));
            const sorted = cards.slice().sort((a, b) => {
                const va = valueFor(a, criterion);
                const vb = valueFor(b, criterion);
                if (typeof va === 'number' && typeof vb === 'number') return direction === 'asc' ? va - vb : vb - va;
                return direction === 'asc' ? va.localeCompare(vb, 'ru') : vb.localeCompare(va, 'ru');
            });
            // animate reorder via FLIP
            animateReorder(moviesList, sorted);
        }

        // handlers
        sortSelect.addEventListener('change', sortMovies);
        sortDirBtn.addEventListener('click', () => {
            direction = (direction === 'asc') ? 'desc' : 'asc';
            updateSortUI();
            sortMovies();
        });

        // init: ensure stable initial order (optional)
        document.addEventListener('DOMContentLoaded', () => {
            // ensure sort UI correct
            updateSortUI();
        });

        // keyboard accessibility
        sortDirBtn.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                sortDirBtn.click();
            }
        });
    </script>
</body>
</html>


